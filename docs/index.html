<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TOIREM - Charity Framework</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="TOIREM Charity Framework - Complete operational guide">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css">
  <style>
    .sidebar-nav > ul > li {
      font-weight: 700;
      margin: 15px 0 5px;
    }
    .markdown-section h1 {
      color: #2c3e50;
      border-bottom: 2px solid #42b983;
      padding-bottom: 10px;
    }
    .key-numbers {
      background: #f4f4f4;
      border-left: 4px solid #42b983;
      padding: 20px;
      margin: 20px 0;
      border-radius: 4px;
    }
    .key-numbers h3 {
      margin-top: 0;
      color: #2c3e50;
    }
    .number-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    .number-card {
      background: white;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 15px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .number-card h4 {
      margin: 0 0 10px 0;
      color: #42b983;
    }
    .number-card .value {
      font-size: 24px;
      font-weight: bold;
      color: #2c3e50;
    }
    .quick-links {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin: 20px 0;
    }
    .quick-links a {
      background: #42b983;
      color: white;
      padding: 8px 16px;
      border-radius: 4px;
      text-decoration: none;
      transition: opacity 0.3s;
    }
    .quick-links a:hover {
      opacity: 0.8;
    }
    .search {
      border-bottom: 1px solid #eee !important;
    }
    .search input {
      padding: 8px !important;
      border: 1px solid #e0e0e0 !important;
      border-radius: 4px !important;
    }

    /* PDF Export Button */
    .pdf-export-btn {
      position: fixed;
      top: 70px;
      right: 20px;
      background: #42b983;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
      z-index: 999;
      transition: opacity 0.3s;
    }
    .pdf-export-btn:hover {
      opacity: 0.8;
    }
    .pdf-export-btn svg {
      width: 16px;
      height: 16px;
    }

    /* External links styling */
    .markdown-section a[href^="http"]:after {
      content: " â†—";
      font-size: 12px;
      vertical-align: super;
    }

    /* Print styles */
    @media print {
      .sidebar,
      .sidebar-toggle,
      .pdf-export-btn,
      .docsify-pagination-container,
      .search {
        display: none !important;
      }
      .content {
        left: 0 !important;
        max-width: 100% !important;
        padding: 0 !important;
      }
      .markdown-section {
        max-width: 100% !important;
        padding: 0 !important;
      }
      .key-numbers {
        break-inside: avoid;
      }
      .number-card {
        break-inside: avoid;
      }
      h1, h2, h3 {
        break-after: avoid;
      }
      body {
        font-size: 11pt;
      }
      a {
        color: #000 !important;
      }
      a[href]:after {
        content: " (" attr(href) ")";
        font-size: 9pt;
        color: #666;
      }
      a[href^="#"]:after,
      a[href^="javascript:"]:after {
        content: "";
      }
    }
  </style>
</head>
<body>
  <div id="app">Loading TOIREM Framework...</div>
  <script>
    window.$docsify = {
      name: 'TOIREM',
      repo: 'https://github.com/yidy718/toirem',
      loadSidebar: true,
      alias: {
        '/.*/_sidebar.md': '/_sidebar.md'
      },
      subMaxLevel: 3,
      search: {
        placeholder: 'Search for thresholds, policies, forms...',
        noData: 'No Results Found',
        paths: 'auto',
        depth: 3
      },
      copyCode: {
        buttonText: 'Copy',
        errorText: 'Error',
        successText: 'Copied'
      },
      pagination: {
        previousText: 'Previous',
        nextText: 'Next',
        crossChapter: true,
        crossChapterText: true,
      },
      auto2top: true,
      plugins: [
        function(hook, vm) {
          // Add PDF export button after page loads
          hook.afterEach(function(html) {
            return html;
          });

          hook.doneEach(function() {
            // Remove existing PDF button if it exists
            const existingBtn = document.querySelector('.pdf-export-btn');
            if (existingBtn) {
              existingBtn.remove();
            }

            // Create PDF export button
            const pdfBtn = document.createElement('button');
            pdfBtn.className = 'pdf-export-btn';
            pdfBtn.innerHTML = `
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" />
              </svg>
              Export PDF
            `;
            pdfBtn.onclick = function() {
              // Get current page title
              const pageTitle = document.querySelector('h1')?.textContent || 'TOIREM Document';

              // Save current title
              const originalTitle = document.title;

              // Set title for PDF
              document.title = pageTitle + ' - TOIREM Framework';

              // Print (will open print dialog with PDF option)
              window.print();

              // Restore original title
              setTimeout(() => {
                document.title = originalTitle;
              }, 100);
            };

            // Add button to page
            document.body.appendChild(pdfBtn);

            // Make all external links open in new tab
            const links = document.querySelectorAll('.markdown-section a[href^="http"]');
            links.forEach(link => {
              link.target = '_blank';
              link.rel = 'noopener noreferrer';
              if (!link.title) {
                link.title = 'Opens in new tab';
              }
            });

            // Add click tracking for internal links
            const internalLinks = document.querySelectorAll('.markdown-section a[href^="#"], .markdown-section a:not([href^="http"])');
            internalLinks.forEach(link => {
              link.addEventListener('click', function(e) {
                const href = this.getAttribute('href');
                if (href && !href.startsWith('http') && !href.startsWith('#')) {
                  // Convert relative paths to hash paths for docsify
                  e.preventDefault();
                  window.location.hash = '#/' + href.replace('.md', '');
                }
              });
            });
          });
        }
      ]
    }
  </script>
  <!-- Docsify v4 -->
  <script src="//cdn.jsdelivr.net/npm/docsify@4"></script>
  <!-- Search plugin -->
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>
  <!-- Copy code plugin -->
  <script src="//cdn.jsdelivr.net/npm/docsify-copy-code/dist/docsify-copy-code.min.js"></script>
  <!-- Pagination -->
  <script src="//cdn.jsdelivr.net/npm/docsify-pagination/dist/docsify-pagination.min.js"></script>
</body>
</html>